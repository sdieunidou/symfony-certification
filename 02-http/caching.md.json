{
  "source_file": "02-http/caching.md",
  "title": "Mise en cache (Caching HTTP)",
  "questions": [
    {
      "id": 1,
      "question": "Sur quels headers HTTP repose le modèle d'Expiration (le plus performant) ?",
      "type": "multiple_choice",
      "options": [
        "Cache-Control (max-age)",
        "Expires",
        "ETag",
        "Last-Modified"
      ],
      "correct_answers": [
        "Cache-Control (max-age)",
        "Expires"
      ],
      "explanation": "L'expiration (Cache-Control, Expires) permet au client de réutiliser le cache sans contacter le serveur, contrairement à la Validation (ETag, Last-Modified) qui nécessite une requête."
    },
    {
      "id": 2,
      "question": "Que signifie le header `Cache-Control: no-cache` ?",
      "type": "single_choice",
      "options": [
        "Le contenu ne doit jamais être mis en cache.",
        "Le cache doit revalider la ressource avec le serveur (ETag/Last-Modified) avant de servir la version stockée.",
        "Le cache est privé.",
        "Le contenu expire immédiatement."
      ],
      "correct_answers": [
        "Le cache doit revalider la ressource avec le serveur (ETag/Last-Modified) avant de servir la version stockée."
      ],
      "explanation": "`no-cache` est trompeur : il n'interdit pas le stockage, mais oblige à vérifier la fraîcheur auprès du serveur avant utilisation."
    },
    {
      "id": 3,
      "question": "Quelle est la différence entre `max-age` et `s-maxage` ?",
      "type": "single_choice",
      "options": [
        "`max-age` est pour les images, `s-maxage` pour les scripts.",
        "`max-age` s'applique à tous les caches, `s-maxage` surcharge `max-age` uniquement pour les caches partagés (CDN, Proxies).",
        "`s-maxage` est une version sécurisée de `max-age`.",
        "Il n'y a aucune différence."
      ],
      "correct_answers": [
        "`max-age` s'applique à tous les caches, `s-maxage` surcharge `max-age` uniquement pour les caches partagés (CDN, Proxies)."
      ],
      "explanation": "Cela permet de définir une durée différente pour le navigateur de l'utilisateur (private) et pour le CDN (shared)."
    },
    {
      "id": 4,
      "question": "Quel code HTTP renvoie le serveur lors d'une revalidation réussie (le contenu n'a pas changé) ?",
      "type": "single_choice",
      "options": [
        "200 OK",
        "301 Moved Permanently",
        "304 Not Modified",
        "409 Conflict"
      ],
      "correct_answers": [
        "304 Not Modified"
      ],
      "explanation": "Le serveur répond 304 sans corps de message, indiquant au client d'utiliser sa version locale."
    },
    {
      "id": 5,
      "question": "Quelle directive empêche formellement tout stockage de la réponse sur disque ou en mémoire ?",
      "type": "single_choice",
      "options": [
        "no-cache",
        "must-revalidate",
        "no-store",
        "private"
      ],
      "correct_answers": [
        "no-store"
      ],
      "explanation": "`no-store` est la seule directive qui interdit strictement tout enregistrement de la donnée (utile pour données bancaires, etc.)."
    },
    {
      "id": 6,
      "question": "À quoi sert la directive `immutable` ?",
      "type": "single_choice",
      "options": [
        "À empêcher la modification du fichier sur le serveur.",
        "À indiquer au client que la ressource ne changera jamais durant sa période de validité, rendant la revalidation inutile même en cas de rafraîchissement manuel.",
        "À rendre le cache permanent (infini).",
        "À protéger le cookie de session."
      ],
      "correct_answers": [
        "À indiquer au client que la ressource ne changera jamais durant sa période de validité, rendant la revalidation inutile même en cas de rafraîchissement manuel."
      ],
      "explanation": "Très utile pour les assets versionnés (ex: `app.12345.js`), cela évite les requêtes 'If-Modified-Since' inutiles."
    }
  ]
}