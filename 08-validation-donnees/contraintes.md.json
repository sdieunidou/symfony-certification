{
  "source_file": "08-validation-donnees/contraintes.md",
  "title": "Contraintes de Validation Natives",
  "questions": [
    {
      "id": 1,
      "question": "Quelle contrainte utiliser pour s'assurer qu'un champ n'est pas vide (obligatoire) ?",
      "type": "single_choice",
      "options": [
        "`NotNull`",
        "`NotEmpty`",
        "`NotBlank`",
        "`Required`"
      ],
      "correct_answers": [
        "`NotBlank`"
      ],
      "explanation": "`NotBlank` vérifie que la valeur n'est pas `null`, pas `false`, pas tableau vide, et pas une chaîne vide (même avec espaces)."
    },
    {
      "id": 2,
      "question": "Par défaut, comment se comportent la plupart des contraintes (ex: `Email`, `Length`) si la valeur est `null` ?",
      "type": "single_choice",
      "options": [
        "Elles échouent (erreur de validation).",
        "Elles ignorent la validation (considéré comme valide).",
        "Elles lancent une exception PHP.",
        "Elles convertissent `null` en chaîne vide."
      ],
      "correct_answers": [
        "Elles ignorent la validation (considéré comme valide)."
      ],
      "explanation": "C'est un principe clé : pour rendre un champ obligatoire, il faut EXPLICITEMENT ajouter `NotNull` ou `NotBlank`. Les autres contraintes ne valident que si une valeur est présente."
    },
    {
      "id": 3,
      "question": "Quelle contrainte permet de valider chaque élément d'un tableau (ex: un tableau d'emails) ?",
      "type": "single_choice",
      "options": [
        "`Collection`",
        "`All`",
        "`ForEach`",
        "`Array`"
      ],
      "correct_answers": [
        "`All`"
      ],
      "explanation": "`#[Assert\\All([new Assert\\Email()])]` applique la contrainte Email à chaque entrée du tableau."
    },
    {
      "id": 4,
      "question": "Quelle contrainte permet de valider la structure d'un tableau associatif (clés et valeurs) ?",
      "type": "single_choice",
      "options": [
        "`Structure`",
        "`Map`",
        "`Collection`",
        "`Assoc`"
      ],
      "correct_answers": [
        "`Collection`"
      ],
      "explanation": "La contrainte `Collection` permet de définir des contraintes pour chaque clé attendue du tableau."
    },
    {
      "id": 5,
      "question": "Quelle contrainte vérifie qu'une valeur est vraie (utile pour les cases 'J'accepte les conditions') ?",
      "type": "single_choice",
      "options": [
        "`True`",
        "`IsTrue`",
        "`Accepted`",
        "`Valid`"
      ],
      "correct_answers": [
        "`IsTrue`"
      ],
      "explanation": "Elle est souvent utilisée sur des propriétés virtuelles (getters) ou des champs de formulaire non mappés."
    },
    {
      "id": 6,
      "question": "Quelle contrainte permet de valider qu'un fichier image respecte certaines dimensions ?",
      "type": "single_choice",
      "options": [
        "`File`",
        "`Image`",
        "`Dimensions`",
        "`Size`"
      ],
      "correct_answers": [
        "`Image`"
      ],
      "explanation": "`Image` hérite de `File` mais ajoute des options comme `minWidth`, `maxHeight`, etc."
    },
    {
      "id": 7,
      "question": "Quelle contrainte utiliser pour vérifier qu'un nombre est un multiple de 0.5 ?",
      "type": "single_choice",
      "options": [
        "`Step`",
        "`DivisibleBy`",
        "`MultipleOf`",
        "`Modulo`"
      ],
      "correct_answers": [
        "`DivisibleBy`"
      ],
      "explanation": "`#[Assert\\DivisibleBy(0.5)]` assure que le nombre est divisible sans reste."
    },
    {
      "id": 8,
      "question": "Quelle est la différence entre `NotNull` et `NotBlank` ?",
      "type": "single_choice",
      "options": [
        "Ils sont identiques.",
        "`NotNull` accepte les chaînes vides (`''`) mais refuse `null`. `NotBlank` refuse à la fois `null`, `''`, `false`, et les tableaux vides.",
        "`NotBlank` est déprécié.",
        "`NotNull` est plus strict."
      ],
      "correct_answers": [
        "`NotNull` accepte les chaînes vides (`''`) mais refuse `null`. `NotBlank` refuse à la fois `null`, `''`, `false`, et les tableaux vides."
      ],
      "explanation": "`NotBlank` est généralement préféré pour les champs obligatoires car il vérifie que la valeur n'est pas 'vide' au sens large."
    },
    {
      "id": 9,
      "question": "Quelle contrainte permet de vérifier qu'un email n'a pas été compromis (via haveibeenpwned) ?",
      "type": "single_choice",
      "options": [
        "`Email`",
        "`NotCompromisedPassword`",
        "`SecureEmail`",
        "`SafePassword`"
      ],
      "correct_answers": [
        "`NotCompromisedPassword`"
      ],
      "explanation": "Cette contrainte vérifie si le mot de passe (ou l'email) apparaît dans la base de données haveibeenpwned."
    },
    {
      "id": 10,
      "question": "Quelle contrainte permet de détecter les caractères suspects (homoglyphes, caractères invisibles) dans une chaîne ?",
      "type": "single_choice",
      "options": [
        "`NoSuspiciousCharacters`",
        "`SafeString`",
        "`CleanText`",
        "`NoInvisibleChars`"
      ],
      "correct_answers": [
        "`NoSuspiciousCharacters`"
      ],
      "explanation": "Cette contrainte de sécurité détecte les caractères qui peuvent être utilisés pour des attaques (homoglyphes, caractères de contrôle invisibles)."
    },
    {
      "id": 11,
      "question": "Quelle contrainte permet de valider qu'un mot de passe correspond au mot de passe actuel de l'utilisateur (pour changement de MDP) ?",
      "type": "single_choice",
      "options": [
        "`CurrentPassword`",
        "`UserPassword`",
        "`MatchPassword`",
        "`VerifyPassword`"
      ],
      "correct_answers": [
        "`UserPassword`"
      ],
      "explanation": "Cette contrainte vérifie que la valeur correspond au mot de passe actuel de l'utilisateur authentifié, utile pour confirmer avant un changement."
    },
    {
      "id": 12,
      "question": "Quel mode de validation d'email est le plus strict dans la contrainte `Email` ?",
      "type": "single_choice",
      "options": [
        "`loose` (défaut).",
        "`html5`.",
        "`strict`.",
        "`rfc5322`."
      ],
      "correct_answers": [
        "`strict`."
      ],
      "explanation": "Le mode `strict` est le plus restrictif. Le mode par défaut (`loose`) peut parfois accepter des emails invalides selon certaines interprétations de la RFC."
    }
  ]
}