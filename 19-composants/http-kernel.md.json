{
  "source_file": "19-composants/http-kernel.md",
  "title": "Le Composant HttpKernel",
  "questions": [
    {
      "id": 1,
      "question": "Quel est le premier événement déclenché lors du traitement d'une requête par le HttpKernel ?",
      "type": "single_choice",
      "options": [
        "`kernel.controller`",
        "`kernel.request`",
        "`kernel.view`",
        "`kernel.response`"
      ],
      "correct_answers": [
        "`kernel.request`"
      ],
      "explanation": "C'est l'événement initial, avant même que le contrôleur ne soit déterminé."
    },
    {
      "id": 2,
      "question": "À quel moment l'événement `kernel.view` est-il déclenché ?",
      "type": "single_choice",
      "options": [
        "Toujours après l'exécution du contrôleur.",
        "Uniquement si le contrôleur ne retourne PAS un objet `Response` (ex: il retourne un tableau de données).",
        "Avant le rendu Twig.",
        "En cas d'erreur."
      ],
      "correct_answers": [
        "Uniquement si le contrôleur ne retourne PAS un objet `Response` (ex: il retourne un tableau de données)."
      ],
      "explanation": "Il sert à transformer la valeur de retour brute (ex: DTO, Array) en une `Response` HTTP valide (ex: JSON serialization)."
    },
    {
      "id": 3,
      "question": "Quel événement est déclenché APRÈS que la réponse a été envoyée au client, permettant d'effectuer des tâches lourdes sans faire attendre l'utilisateur ?",
      "type": "single_choice",
      "options": [
        "`kernel.finish_request`",
        "`kernel.terminate`",
        "`kernel.response`",
        "`kernel.close`"
      ],
      "correct_answers": [
        "`kernel.terminate`"
      ],
      "explanation": "`kernel.terminate` intervient après `fastcgi_finish_request()`, donc la connexion avec le client est close."
    },
    {
      "id": 4,
      "question": "Quel composant est responsable de déterminer quel contrôleur exécuter à partir de la Request ?",
      "type": "single_choice",
      "options": [
        "`ArgumentResolver`",
        "`ControllerResolver`",
        "`RouterListener`",
        "`Dispatcher`"
      ],
      "correct_answers": [
        "`ControllerResolver`"
      ],
      "explanation": "Le `ControllerResolver` lit les attributs de requête (définis par le routeur) pour retourner un callable PHP."
    }
  ]
}
