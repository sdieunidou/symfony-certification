{
  "source_file": "11-cache/http-client-side.md",
  "title": "Mise en cache Client-side (Navigateur)",
  "questions": [
    {
      "id": 1,
      "question": "Quelle est la différence fondamentale entre les directives `private` et `public` du header `Cache-Control` ?",
      "type": "single_choice",
      "options": [
        "`private` crypte les données, `public` les envoie en clair.",
        "`private` indique que la réponse est spécifique à l'utilisateur et ne doit être stockée que par le navigateur. `public` permet le stockage par les caches partagés (CDN, Proxies).",
        "`private` est pour l'intranet, `public` pour internet.",
        "`private` désactive le cache, `public` l'active."
      ],
      "correct_answers": [
        "`private` indique que la réponse est spécifique à l'utilisateur et ne doit être stockée que par le navigateur. `public` permet le stockage par les caches partagés (CDN, Proxies)."
      ],
      "explanation": "C'est la distinction majeure : `private` protège les données utilisateur (ex: page profil) d'être servies à d'autres via un CDN."
    },
    {
      "id": 2,
      "question": "Que signifie la directive `no-cache` ?",
      "type": "single_choice",
      "options": [
        "Ne rien stocker du tout.",
        "Le cache est autorisé, mais le client doit valider la fraîcheur (via ETag/Last-Modified) avec le serveur avant chaque réutilisation.",
        "Le cache est désactivé pour les images uniquement.",
        "C'est un synonyme de `no-store`."
      ],
      "correct_answers": [
        "Le cache est autorisé, mais le client doit valider la fraîcheur (via ETag/Last-Modified) avec le serveur avant chaque réutilisation."
      ],
      "explanation": "`no-cache` ne signifie pas 'pas de cache', mais 'pas de cache sans validation'. Pour interdire le stockage, c'est `no-store`."
    },
    {
      "id": 3,
      "question": "Quel est le comportement par défaut de Symfony concernant le cache HTTP lorsqu'une session est active ?",
      "type": "single_choice",
      "options": [
        "Il met la réponse en `public`.",
        "Il désactive tout header de cache.",
        "Il force la réponse en `private, must-revalidate, max-age=0`.",
        "Il ignore la session."
      ],
      "correct_answers": [
        "Il force la réponse en `private, must-revalidate, max-age=0`."
      ],
      "explanation": "Par sécurité, si une session est démarrée, Symfony considère la page comme privée et dynamique, empêchant le cache accidentel de données sensibles."
    },
    {
      "id": 4,
      "question": "Quelle méthode de l'objet `Response` permet d'indiquer qu'une ressource ne changera JAMAIS ?",
      "type": "single_choice",
      "options": [
        "`$response->setImmutable(true)`",
        "`$response->setPublic()`",
        "`$response->setMaxAge(0)`",
        "Aucune, le web change tout le temps."
      ],
      "correct_answers": [
        "`$response->setImmutable(true)`"
      ],
      "explanation": "Cela ajoute `immutable` au header `Cache-Control`, indiquant au navigateur qu'il n'est même pas nécessaire de revalider la ressource tant qu'elle n'a pas expiré."
    },
    {
      "id": 5,
      "question": "Si vous utilisez à la fois `Expires` et `Cache-Control: max-age`, lequel est prioritaire pour un navigateur moderne ?",
      "type": "single_choice",
      "options": [
        "`Expires`",
        "`Cache-Control: max-age`",
        "Le plus restrictif des deux.",
        "La moyenne des deux."
      ],
      "correct_answers": [
        "`Cache-Control: max-age`"
      ],
      "explanation": "`max-age` (HTTP/1.1) a la priorité sur `Expires` (HTTP/1.0)."
    },
    {
      "id": 6,
      "question": "Que garantit la directive `must-revalidate` une fois le cache expiré ?",
      "type": "single_choice",
      "options": [
        "Que le navigateur doit effacer le cache.",
        "Que le cache ne doit JAMAIS servir une réponse périmée (stale), même si le serveur est injoignable (erreur réseau).",
        "Qu'il faut se reconnecter.",
        "Rien de spécial."
      ],
      "correct_answers": [
        "Que le cache ne doit JAMAIS servir une réponse périmée (stale), même si le serveur est injoignable (erreur réseau)."
      ],
      "explanation": "Sans cette directive, certains navigateurs pourraient décider de servir une version périmée s'ils n'arrivent pas à contacter le serveur."
    },
    {
      "id": 7,
      "question": "Quelle directive indique au navigateur qu'il ne doit même pas revalider lors d'un rafraîchissement manuel si le TTL n'est pas expiré ?",
      "type": "single_choice",
      "options": [
        "`immutable`",
        "`must-revalidate`",
        "`no-cache`",
        "`no-store`"
      ],
      "correct_answers": [
        "`immutable`"
      ],
      "explanation": "Cache-Control: immutable évite les revalidations pour les assets versionnés."
    },
    {
      "id": 8,
      "question": "Pourquoi `no-store` est-il plus strict que `no-cache` ?",
      "type": "single_choice",
      "options": [
        "no-store interdit tout stockage local, no-cache autorise le stockage mais impose une validation avant usage",
        "no-cache interdit le stockage, no-store autorise",
        "Ils sont équivalents",
        "no-store chiffre la réponse"
      ],
      "correct_answers": [
        "no-store interdit tout stockage local, no-cache autorise le stockage mais impose une validation avant usage"
      ],
      "explanation": "no-store est requis pour données sensibles (banque)."
    },
    {
      "id": 9,
      "question": "Quel impact a `Vary: Cookie` sur une réponse publique ?",
      "type": "single_choice",
      "options": [
        "Il fragmente le cache par valeur de cookie, le rendant quasi inefficace",
        "Il accélère le cache",
        "Il force le chiffrement",
        "Aucun"
      ],
      "correct_answers": [
        "Il fragmente le cache par valeur de cookie, le rendant quasi inefficace"
      ],
      "explanation": "Chaque cookie différent crée une version différente, tuant le partage."
    },
    {
      "id": 10,
      "question": "Comment forcer une réponse publique malgré une session ouverte (en connaissance de cause) ?",
      "type": "single_choice",
      "options": [
        "Appeler `$response->setPublic()` explicitement",
        "Détruire la session",
        "Utiliser no-store",
        "Impossible"
      ],
      "correct_answers": [
        "Appeler `$response->setPublic()` explicitement"
      ],
      "explanation": "Symfony met private par défaut si session; setPublic() écrase mais attention aux données perso."
    }
  ]
}