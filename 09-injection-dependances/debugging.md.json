{
  "source_file": "09-injection-dependances/debugging.md",
  "title": "Débogage du Conteneur",
  "questions": [
    {
      "id": 1,
      "question": "Quelle commande permet de lister tous les services publics disponibles dans le conteneur ?",
      "type": "single_choice",
      "options": [
        "php bin/console list:services",
        "php bin/console debug:container",
        "php bin/console services:debug",
        "php bin/console debug:router"
      ],
      "correct_answers": [
        "php bin/console debug:container"
      ],
      "explanation": "C'est la commande principale pour inspecter le contenu du conteneur de services."
    },
    {
      "id": 2,
      "question": "Quelle est la différence principale entre `debug:container` et `debug:autowiring` ?",
      "type": "single_choice",
      "options": [
        "Il n'y en a aucune, c'est un alias.",
        "`debug:container` liste les services (IDs), alors que `debug:autowiring` liste les types (classes/interfaces) utilisables pour l'injection.",
        "`debug:autowiring` est plus lent.",
        "`debug:container` ne montre que les services privés."
      ],
      "correct_answers": [
        "`debug:container` liste les services (IDs), alors que `debug:autowiring` liste les types (classes/interfaces) utilisables pour l'injection."
      ],
      "explanation": "Un service peut exister dans le conteneur mais ne pas être autowirable s'il n'est pas associé à un type unique."
    },
    {
      "id": 3,
      "question": "À quoi sert la commande `lint:container` ?",
      "type": "single_choice",
      "options": [
        "À formater le fichier services.yaml.",
        "À vérifier que les services injectés correspondent aux types attendus dans les constructeurs.",
        "À supprimer les services inutilisés.",
        "À optimiser le cache."
      ],
      "correct_answers": [
        "À vérifier que les services injectés correspondent aux types attendus dans les constructeurs."
      ],
      "explanation": "Elle permet de détecter les erreurs de configuration (arguments manquants, mauvais types) sans avoir à lancer l'application."
    },
    {
      "id": 4,
      "question": "Si un service n'apparaît pas dans `debug:container`, quelle est la cause la plus probable ?",
      "type": "single_choice",
      "options": [
        "Le service est privé (par défaut).",
        "Le service n'existe pas.",
        "Le fichier yaml est vide.",
        "Symfony est cassé."
      ],
      "correct_answers": [
        "Le service est privé (par défaut)."
      ],
      "explanation": "Les services privés sont masqués par défaut. Il faut spécifier l'ID du service ou utiliser des options pour les voir."
    },
    {
      "id": 5,
      "question": "Comment filtrer la liste des services par nom avec `debug:container` ?",
      "type": "single_choice",
      "options": [
        "En utilisant grep.",
        "Avec l'option `--name=mon_service` ou simplement en passant un argument.",
        "Avec `--filter`.",
        "Avec `--search`."
      ],
      "correct_answers": [
        "Avec l'option `--name=mon_service` ou simplement en passant un argument."
      ],
      "explanation": "Exemple : `php bin/console debug:container mailer` affichera tous les services contenant 'mailer'."
    },
    {
      "id": 6,
      "question": "Pourquoi un service peut-il apparaître dans `debug:container` mais pas dans `debug:autowiring` ?",
      "type": "single_choice",
      "options": [
        "Parce qu'il est privé",
        "Parce qu'il n'a pas d'alias de type (pas autowirable)",
        "Parce qu'il est lazy",
        "Parce que l'autowiring est désactivé en prod"
      ],
      "correct_answers": [
        "Parce qu'il n'a pas d'alias de type (pas autowirable)"
      ],
      "explanation": "Il faut un alias de classe/interface pour qu'il soit proposé à l'autowiring."
    },
    {
      "id": 7,
      "question": "Quelle commande liste les types autowirables correspondant à 'logger' ?",
      "type": "single_choice",
      "options": [
        "`php bin/console debug:autowiring logger`",
        "`php bin/console debug:container logger`",
        "`php bin/console list logger`",
        "`php bin/console about`"
      ],
      "correct_answers": [
        "`php bin/console debug:autowiring logger`"
      ],
      "explanation": "Permet de voir l'alias Psr\\Log\\LoggerInterface -> monolog.logger."
    },
    {
      "id": 8,
      "question": "Comment inspecter les arguments et tags d'un service privé spécifique ?",
      "type": "single_choice",
      "options": [
        "Impossible car il est privé",
        "En passant son ID exact à `debug:container ID`",
        "En activant public: true",
        "Avec debug:autowiring"
      ],
      "correct_answers": [
        "En passant son ID exact à `debug:container ID`"
      ],
      "explanation": "debug:container accepte les services privés si on donne l'ID complet."
    },
    {
      "id": 9,
      "question": "Quel outil Symfony repère les services marqués comme dépréciés ?",
      "type": "single_choice",
      "options": [
        "`debug:container --deprecations`",
        "`debug:autowiring --deprecated`",
        "`lint:container --deprecated`",
        "`cache:clear --deprecations`"
      ],
      "correct_answers": [
        "`debug:container --deprecations`"
      ],
      "explanation": "Affiche les services consommés malgré leur statut déprécié."
    },
    {
      "id": 10,
      "question": "Pourquoi `lint:container` est conseillé dans une pipeline CI ?",
      "type": "single_choice",
      "options": [
        "Pour formater les YAML",
        "Pour détecter tôt les erreurs d'autowiring/arguments manquants avant déploiement",
        "Pour vider le cache",
        "Pour tester la prod"
      ],
      "correct_answers": [
        "Pour détecter tôt les erreurs d'autowiring/arguments manquants avant déploiement"
      ],
      "explanation": "Le lint échoue la build si un service est mal configuré."
    }
  ]
}