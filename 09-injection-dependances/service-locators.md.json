{
  "source_file": "09-injection-dependances/service-locators.md",
  "title": "Service Subscribers & Locators",
  "questions": [
    {
      "id": 1,
      "question": "Quel attribut permet d'injecter un Service Locator configuré depuis le constructeur ?",
      "type": "single_choice",
      "options": [
        "#[InjectLocator]",
        "#[AutowireLocator]",
        "#[ServiceLocator]",
        "#[Locate]"
      ],
      "correct_answers": [
        "#[AutowireLocator]"
      ],
      "explanation": "Permet de définir la liste des services (ou un tag) directement sur l'argument du constructeur."
    },
    {
      "id": 2,
      "question": "Quelle est la différence principale entre injecter `iterable $services` (via `#[AutowireIterator]`) et `ContainerInterface $locator` (via `#[AutowireLocator]`) ?",
      "type": "single_choice",
      "options": [
        "Aucune.",
        "Le locator est lazy (instanciation à la demande), l'itérateur instancie chaque service au moment de l'itération.",
        "L'itérateur est lazy, le locator instancie tout immédiatement.",
        "Le locator est déprécié."
      ],
      "correct_answers": [
        "Le locator est lazy (instanciation à la demande), l'itérateur instancie chaque service au moment de l'itération."
      ],
      "explanation": "Le Locator est préférable si on n'a besoin que d'un seul service parmi une grande liste."
    },
    {
      "id": 3,
      "question": "Quelle interface permet d'itérer sur un Service Locator (depuis Symfony 7.1) ?",
      "type": "single_choice",
      "options": [
        "Psr\\Container\\ContainerInterface",
        "Symfony\\Component\\DependencyInjection\\ServiceCollectionInterface",
        "IteratorAggregate",
        "Traversable"
      ],
      "correct_answers": [
        "Symfony\\Component\\DependencyInjection\\ServiceCollectionInterface"
      ],
      "explanation": "Elle étend `ContainerInterface` en ajoutant `Countable` et `IteratorAggregate`."
    },
    {
      "id": 4,
      "question": "Comment rendre un service optionnel dans `getSubscribedServices()` ?",
      "type": "single_choice",
      "options": [
        "En utilisant `null` comme valeur.",
        "En préfixant le type ou l'ID par un point d'interrogation `?`.",
        "En utilisant l'attribut `#[Optional]`.",
        "Ce n'est pas possible."
      ],
      "correct_answers": [
        "En préfixant le type ou l'ID par un point d'interrogation `?`."
      ],
      "explanation": "Exemple : `'router' => '?'.RouterInterface::class`."
    }
  ]
}
