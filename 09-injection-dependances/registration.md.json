{
  "source_file": "09-injection-dependances/registration.md",
  "title": "Enregistrement de Services (`services.yaml`)",
  "questions": [
    {
      "id": 1,
      "question": "Que fait l'option `autowire: true` dans `services.yaml` ?",
      "type": "single_choice",
      "options": [
        "Elle crée les services automatiquement.",
        "Elle permet à Symfony de deviner et d'injecter automatiquement les dépendances dans le constructeur en se basant sur le typage.",
        "Elle active le wiring des routes.",
        "Elle supprime les services inutilisés."
      ],
      "correct_answers": [
        "Elle permet à Symfony de deviner et d'injecter automatiquement les dépendances dans le constructeur en se basant sur le typage."
      ],
      "explanation": "C'est la fonctionnalité clé pour ne plus avoir à écrire manuellement les arguments de chaque service."
    },
    {
      "id": 2,
      "question": "Que fait l'option `autoconfigure: true` ?",
      "type": "single_choice",
      "options": [
        "Elle configure les paramètres.",
        "Elle ajoute automatiquement les tags appropriés aux services en fonction des interfaces qu'ils implémentent (ex: `Command`, `EventSubscriber`).",
        "Elle active l'autowiring.",
        "Elle charge les bundles."
      ],
      "correct_answers": [
        "Elle ajoute automatiquement les tags appropriés aux services en fonction des interfaces qu'ils implémentent (ex: `Command`, `EventSubscriber`)."
      ],
      "explanation": "Sans cela, il faudrait taguer manuellement chaque commande console ou écouteur d'événement."
    },
    {
      "id": 3,
      "question": "À quoi sert la section `App\\` dans `services.yaml` ?",
      "type": "single_choice",
      "options": [
        "À définir le namespace de l'application.",
        "À enregistrer automatiquement toutes les classes du dossier `src/` comme services (Service Discovery).",
        "À exclure les services tiers.",
        "À configurer l'application."
      ],
      "correct_answers": [
        "À enregistrer automatiquement toutes les classes du dossier `src/` comme services (Service Discovery)."
      ],
      "explanation": "Cela évite de devoir déclarer chaque classe PHP une par une dans le fichier YAML."
    },
    {
      "id": 4,
      "question": "Si vous avez besoin de passer un argument scalaire (string) à un service spécifique qui ne peut pas être autowiré, comment faites-vous ?",
      "type": "single_choice",
      "options": [
        "Impossible.",
        "En le redéfinissant explicitement dans `services.yaml` avec la clé `arguments`.",
        "En modifiant le constructeur.",
        "En utilisant une variable globale."
      ],
      "correct_answers": [
        "En le redéfinissant explicitement dans `services.yaml` avec la clé `arguments`."
      ],
      "explanation": "La définition explicite surcharge la définition générique."
    },
    {
      "id": 5,
      "question": "Pourquoi exclut-on généralement le dossier `Entity` et `Kernel.php` de l'enregistrement automatique des services ?",
      "type": "single_choice",
      "options": [
        "Parce qu'ils sont privés.",
        "Parce que ce ne sont pas des services (les entités sont des objets de données, le Kernel est le cœur).",
        "Pour gagner du temps de compilation.",
        "C'est une erreur, il faut les inclure."
      ],
      "correct_answers": [
        "Parce que ce ne sont pas des services (les entités sont des objets de données, le Kernel est le cœur)."
      ],
      "explanation": "Les entités sont instanciées par Doctrine ou manuellement, pas par le conteneur."
    },
    {
      "id": 6,
      "question": "Que permet la clé `exclude` dans la section `App\\` ?",
      "type": "single_choice",
      "options": [
        "Ne pas charger certains répertoires/fichiers en tant que services",
        "Supprimer les services du cache",
        "Rendre les services publics",
        "Désactiver l'autowiring"
      ],
      "correct_answers": [
        "Ne pas charger certains répertoires/fichiers en tant que services"
      ],
      "explanation": "Prévient l'enregistrement d'éléments qui ne sont pas des services."
    },
    {
      "id": 7,
      "question": "Pourquoi placer `App\\` (service discovery) en haut du fichier `services.yaml` ?",
      "type": "single_choice",
      "options": [
        "Pour des raisons alphabétiques",
        "Pour que les définitions spécifiques en dessous puissent surcharger les génériques",
        "Pour rendre les services publics",
        "Parce que Composer l'exige"
      ],
      "correct_answers": [
        "Pour que les définitions spécifiques en dessous puissent surcharger les génériques"
      ],
      "explanation": "L'ordre détermine quelle définition l'emporte."
    },
    {
      "id": 8,
      "question": "Quelle option d'attribut permet d'activer un service uniquement dans certains environnements ?",
      "type": "single_choice",
      "options": [
        "`#[When(env: 'dev')]` ou `#[WhenNot(env: 'dev')]`",
        "`#[EnvOnly]`",
        "`#[Profile('dev')]`",
        "`#[Environment('dev')]`"
      ],
      "correct_answers": [
        "`#[When(env: 'dev')]` ou `#[WhenNot(env: 'dev')]`"
      ],
      "explanation": "Les attributs When/WhenNot restreignent l'enregistrement par env."
    },
    {
      "id": 9,
      "question": "Comment retirer un service uniquement dans l'environnement de test ?",
      "type": "single_choice",
      "options": [
        "Dans `config/services_test.php`, appeler `$services->remove(Service::class);`",
        "Mettre public: false",
        "Supprimer le fichier",
        "Mettre autowire: false"
      ],
      "correct_answers": [
        "Dans `config/services_test.php`, appeler `$services->remove(Service::class);`"
      ],
      "explanation": "Le fichier spécifique à l'env peut enlever une définition."
    },
    {
      "id": 10,
      "question": "Quel piège avec les imports de répertoires multiples utilisant `namespace` ?",
      "type": "single_choice",
      "options": [
        "Oublier de définir `namespace` provoque des collisions d'IDs de services",
        "Cela rend les services publics",
        "Cela désactive l'autowiring",
        "Cela casse le cache"
      ],
      "correct_answers": [
        "Oublier de définir `namespace` provoque des collisions d'IDs de services"
      ],
      "explanation": "Plusieurs ressources sous le même namespace sans préciser `namespace` peuvent écraser des services."
    }
  ]
}