{
  "source_file": "09-injection-dependances/factories.md",
  "title": "Factories (Usines)",
  "questions": [
    {
      "id": 1,
      "question": "Quelle est la syntaxe pour utiliser un service comme factory (méthode non statique) en YAML ?",
      "type": "single_choice",
      "options": [
        "factory: ['App\\MyFactory', 'create']",
        "factory: ['@App\\MyFactory', 'create']",
        "factory: 'App\\MyFactory::create'",
        "service_factory: '@App\\MyFactory'"
      ],
      "correct_answers": [
        "factory: ['@App\\MyFactory', 'create']"
      ],
      "explanation": "Le '@' indique qu'on référence un service existant, et non une classe statique."
    },
    {
      "id": 2,
      "question": "À quoi correspond l'option `arguments` sur une définition de service utilisant une factory ?",
      "type": "single_choice",
      "options": [
        "Aux arguments passés au constructeur de la classe du service.",
        "Aux arguments passés à la méthode de la factory.",
        "Aux arguments passés au constructeur de la factory.",
        "C'est interdit."
      ],
      "correct_answers": [
        "Aux arguments passés à la méthode de la factory."
      ],
      "explanation": "Le conteneur appelle `Factory::method(...arguments)`, c'est ensuite à la factory de passer ce qu'il faut au `new Service()`."
    },
    {
      "id": 3,
      "question": "Comment configurer une classe pour qu'elle utilise sa propre méthode statique `create` comme constructeur via un attribut ?",
      "type": "single_choice",
      "options": [
        "#[AsFactory('create')]",
        "#[Autoconfigure(constructor: 'create')]",
        "#[Construct('create')]",
        "#[Factory(method: 'create')]"
      ],
      "correct_answers": [
        "#[Autoconfigure(constructor: 'create')]"
      ],
      "explanation": "C'est l'option `constructor` de l'attribut `Autoconfigure` qui gère ce cas (Self-Factory)."
    },
    {
      "id": 4,
      "question": "Peut-on utiliser une expression pour définir une factory ?",
      "type": "single_choice",
      "options": [
        "Non, une factory doit être une classe ou un service.",
        "Oui, avec la syntaxe `factory: '@=...'`.",
        "Oui, mais seulement en XML.",
        "Non, pour des raisons de performance."
      ],
      "correct_answers": [
        "Oui, avec la syntaxe `factory: '@=...'`."
      ],
      "explanation": "Cela permet de retourner dynamiquement un service ou un autre selon une condition (ex: debug)."
    }
  ]
}
