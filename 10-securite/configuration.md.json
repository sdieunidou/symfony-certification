{
  "source_file": "10-securite/configuration.md",
  "title": "Configuration de la Sécurité (`security.yaml`)",
  "questions": [
    {
      "id": 1,
      "question": "Dans `security.yaml`, quel est l'ordre d'importance des firewalls ?",
      "type": "single_choice",
      "options": [
        "Le dernier gagne.",
        "L'ordre n'a pas d'importance.",
        "Le premier qui matche l'URL (pattern) gagne (First Match Wins).",
        "Le plus sécurisé gagne."
      ],
      "correct_answers": [
        "Le premier qui matche l'URL (pattern) gagne (First Match Wins)."
      ],
      "explanation": "C'est pourquoi on place généralement le firewall `dev` (pattern `^/(_(profiler|wdt)|css|images|js)/`) en premier pour éviter de déclencher la sécurité sur les assets."
    },
    {
      "id": 2,
      "question": "À quoi sert l'option `security: false` dans un firewall ?",
      "type": "single_choice",
      "options": [
        "À désactiver l'authentification mais garder l'autorisation.",
        "À désactiver complètement la couche sécurité (pas de session, pas d'utilisateur) pour les URLs matchées.",
        "À rendre l'URL publique.",
        "C'est déprécié."
      ],
      "correct_answers": [
        "À désactiver complètement la couche sécurité (pas de session, pas d'utilisateur) pour les URLs matchées."
      ],
      "explanation": "C'est une optimisation de performance indispensable pour les routes techniques (Profiler, WDT) et les assets."
    },
    {
      "id": 3,
      "question": "Si vous avez deux firewalls (ex: `main` et `admin`) et que vous voulez partager la session utilisateur entre eux, quelle option devez-vous configurer ?",
      "type": "single_choice",
      "options": [
        "`shared: true`",
        "`context: 'my_context_name'` (doit être identique sur les deux firewalls)",
        "`session: global`",
        "`provider: same`"
      ],
      "correct_answers": [
        "`context: 'my_context_name'` (doit être identique sur les deux firewalls)"
      ],
      "explanation": "Le contexte définit la clé de stockage en session. Si les contextes diffèrent, les sessions sont isolées."
    },
    {
      "id": 4,
      "question": "Quelle section de `security.yaml` permet de définir la hiérarchie des rôles (ex: `ROLE_ADMIN` hérite de `ROLE_USER`) ?",
      "type": "single_choice",
      "options": [
        "`access_control`",
        "`role_hierarchy`",
        "`providers`",
        "`firewalls`"
      ],
      "correct_answers": [
        "`role_hierarchy`"
      ],
      "explanation": "Cela permet de simplifier les règles d'accès en vérifiant uniquement le rôle le plus élevé."
    },
    {
      "id": 5,
      "question": "Quel est le pattern typique pour le firewall 'dev' qui doit ignorer la sécurité ?",
      "type": "single_choice",
      "options": [
        "`^/admin`",
        "`^/api`",
        "`^/(_(profiler|wdt)|css|images|js)/`",
        "`^/login`"
      ],
      "correct_answers": [
        "`^/(_(profiler|wdt)|css|images|js)/`"
      ],
      "explanation": "Ce pattern couvre la barre de débogage web, le profiler et les assets statiques, qui ne doivent pas déclencher de mécanismes de sécurité."
    },
    {
      "id": 6,
      "question": "Comment activer un custom authenticator dans `security.yaml` ?",
      "type": "single_choice",
      "options": [
        "Dans le firewall: `custom_authenticator: App\\Security\\MyAuthenticator`",
        "Dans providers",
        "Dans role_hierarchy",
        "Dans access_control"
      ],
      "correct_answers": [
        "Dans le firewall: `custom_authenticator: App\\Security\\MyAuthenticator`"
      ],
      "explanation": "Les authenticators sont déclarés au niveau du firewall."
    },
    {
      "id": 7,
      "question": "Pourquoi définir `security: false` sur le firewall `dev` ?",
      "type": "single_choice",
      "options": [
        "Pour désactiver toute mécanique sécurité sur les assets/profiler et améliorer les perfs",
        "Pour bloquer le profiler",
        "Pour forcer HTTPS",
        "Pour activer le debug"
      ],
      "correct_answers": [
        "Pour désactiver toute mécanique sécurité sur les assets/profiler et améliorer les perfs"
      ],
      "explanation": "On évite session/user sur ces routes techniques."
    },
    {
      "id": 8,
      "question": "Comment partager la même session d'authentification entre deux firewalls ?",
      "type": "single_choice",
      "options": [
        "En leur donnant le même `context`",
        "En réutilisant le même provider",
        "En mettant `stateless: true`",
        "Impossible"
      ],
      "correct_answers": [
        "En leur donnant le même `context`"
      ],
      "explanation": "Le contexte définit la clé de session utilisée pour stocker le token."
    },
    {
      "id": 9,
      "question": "Où configure-t-on `role_hierarchy` ?",
      "type": "single_choice",
      "options": [
        "Dans `security: role_hierarchy`",
        "Dans `services.yaml`",
        "Dans `providers`",
        "Dans `.env`"
      ],
      "correct_answers": [
        "Dans `security: role_hierarchy`"
      ],
      "explanation": "La hiérarchie se déclare dans la section sécurité."
    },
    {
      "id": 10,
      "question": "Pourquoi `enable_authenticator_manager` n'apparaît plus dans les configs récentes ?",
      "type": "single_choice",
      "options": [
        "Il est activé par défaut depuis Symfony 6",
        "Il est déprécié et retiré",
        "Parce qu'on utilise Guard",
        "Parce que les firewalls sont stateless"
      ],
      "correct_answers": [
        "Il est activé par défaut depuis Symfony 6"
      ],
      "explanation": "Le nouveau système d'authentification est l'option par défaut."
    }
  ]
}