{
  "source_file": "13-tests-automatises/crawler.md",
  "title": "Objet Crawler (DomCrawler)",
  "questions": [
    {
      "id": 1,
      "question": "Pour soumettre un formulaire avec le Crawler, quel élément devez-vous sélectionner en premier ?",
      "type": "single_choice",
      "options": [
        "La balise `<form>` elle-même.",
        "Un bouton de soumission (submit button) à l'intérieur du formulaire.",
        "Le premier champ input.",
        "L'URL de l'action."
      ],
      "correct_answers": [
        "Un bouton de soumission (submit button) à l'intérieur du formulaire."
      ],
      "explanation": "Le Crawler fonctionne par interaction utilisateur : on clique sur un bouton, ce qui nous donne accès à l'objet Form associé."
    },
    {
      "id": 2,
      "question": "Quelle méthode permet d'extraire le texte contenu dans un nœud sélectionné ?",
      "type": "single_choice",
      "options": [
        "`->html()`",
        "`->content()`",
        "`->text()`",
        "`->value()`"
      ],
      "correct_answers": [
        "`->text()`"
      ],
      "explanation": "`text()` retourne le contenu textuel du nœud (sans les balises HTML)."
    },
    {
      "id": 3,
      "question": "Comment remplir un champ de formulaire nommé `my_form[name]` une fois l'objet `$form` obtenu ?",
      "type": "single_choice",
      "options": [
        "`$form->set('name', 'Value');`",
        "`$form['my_form[name]'] = 'Value';`",
        "`$form->fill(['name' => 'Value']);`",
        "`$client->fillField('name', 'Value');`"
      ],
      "correct_answers": [
        "`$form['my_form[name]'] = 'Value';`"
      ],
      "explanation": "L'objet Form implémente `ArrayAccess`, permettant de définir les valeurs des champs comme s'il s'agissait d'un tableau."
    },
    {
      "id": 4,
      "question": "Quelle méthode permet d'itérer sur plusieurs nœuds trouvés par le Crawler ?",
      "type": "single_choice",
      "options": [
        "`foreach ($crawler as $node)`",
        "`$crawler->each(function ($node, $i) { ... })`",
        "`$crawler->map(...)`",
        "`$crawler->walk(...)`"
      ],
      "correct_answers": [
        "`$crawler->each(function ($node, $i) { ... })`"
      ],
      "explanation": "La méthode `each` prend une callback qui reçoit chaque nœud et son index."
    },
    {
      "id": 5,
      "question": "Comment cliquer sur un lien dont le texte est 'Se connecter' en utilisant le Crawler ?",
      "type": "single_choice",
      "options": [
        "`$client->click('Se connecter');`",
        "`$link = $crawler->selectLink('Se connecter')->link(); $client->click($link);`",
        "`$crawler->clickLink('Se connecter');`",
        "`$client->follow('Se connecter');`"
      ],
      "correct_answers": [
        "`$link = $crawler->selectLink('Se connecter')->link(); $client->click($link);`"
      ],
      "explanation": "Il faut d'abord sélectionner le nœud du lien, le convertir en objet `Link` avec `link()`, puis passer cet objet au client."
    },
    {
      "id": 6,
      "question": "Comment lire un attribut (ex: href) sur le premier nœud sélectionné ?",
      "type": "single_choice",
      "options": [
        "`$crawler->attr('href')`",
        "`$crawler->attribute('href')`",
        "`$crawler->getAttribute('href')`",
        "`$crawler->first()->get('href')`"
      ],
      "correct_answers": [
        "`$crawler->attr('href')`"
      ],
      "explanation": "attr() lit l'attribut sur le premier nœud de la sélection."
    },
    {
      "id": 7,
      "question": "Comment filtrer des nœuds via un sélecteur CSS ?",
      "type": "single_choice",
      "options": [
        "`$crawler->filter('div.alert');`",
        "`$crawler->css('div.alert');`",
        "`$crawler->querySelector('div.alert');`",
        "`$crawler->select('div.alert');`"
      ],
      "correct_answers": [
        "`$crawler->filter('div.alert');`"
      ],
      "explanation": "filter() s'appuie sur CssSelector pour cibler des nœuds."
    },
    {
      "id": 8,
      "question": "Comment vérifier qu'au moins un h1 est présent ?",
      "type": "single_choice",
      "options": [
        "`$this->assertGreaterThan(0, $crawler->filter('h1')->count());`",
        "`$crawler->exists('h1')`",
        "`$crawler->has('h1')`",
        "`$crawler->length('h1')`"
      ],
      "correct_answers": [
        "`$this->assertGreaterThan(0, $crawler->filter('h1')->count());`"
      ],
      "explanation": "count() retourne le nombre de nœuds."
    },
    {
      "id": 9,
      "question": "Comment soumettre un formulaire avec plusieurs boutons submit en choisissant le bon bouton ?",
      "type": "single_choice",
      "options": [
        "Sélectionner le bouton ciblé avec `selectButton()` puis `form()`/`submit()`",
        "DomCrawler choisit toujours le premier bouton",
        "Passer l'ID du bouton à submit()",
        "Impossible"
      ],
      "correct_answers": [
        "Sélectionner le bouton ciblé avec `selectButton()` puis `form()`/`submit()`"
      ],
      "explanation": "selectButton choisit quel submit utiliser dans le form associé."
    },
    {
      "id": 10,
      "question": "Comment cliquer un lien trouvé par sélecteur CSS plutôt que par son texte ?",
      "type": "single_choice",
      "options": [
        "Utiliser `$crawler->filter('a.my-link')->link();` puis `$client->click($link);`",
        "`$client->clickSelector()`",
        "`$crawler->clickCss()`",
        "Impossible"
      ],
      "correct_answers": [
        "Utiliser `$crawler->filter('a.my-link')->link();` puis `$client->click($link);`"
      ],
      "explanation": "filter sélectionne le nœud, link() construit l'objet Link à cliquer."
    }
  ]
}