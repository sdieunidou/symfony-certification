{
  "source_file": "20-frontend/web-link.md",
  "title": "WebLink & Performance Frontend",
  "questions": [
    {
      "id": 1,
      "question": "Quels rôles principaux du composant WebLink (PSR-13) dans Symfony 7 ?",
      "type": "multiple_choice",
      "options": [
        "Gérer les en-têtes HTTP `Link` (preload/prefetch/prerender)",
        "Optimiser le chargement des ressources critiques avant parsing complet",
        "Gérer le SEO automatiquement",
        "Remplacer le routeur Symfony"
      ],
      "correct_answers": [
        "Gérer les en-têtes HTTP `Link` (preload/prefetch/prerender)",
        "Optimiser le chargement des ressources critiques avant parsing complet"
      ],
      "explanation": "WebLink manipule les headers Link pour donner des indices de ressources au navigateur."
    },
    {
      "id": 2,
      "question": "Quelles différences entre `preload`, `prefetch` et `prerender` ?",
      "type": "multiple_choice",
      "options": [
        "Preload = ressource nécessaire immédiatement pour la page courante",
        "Prefetch = ressource probablement utile pour la page suivante",
        "Prerender = chargement et rendu d'une page complète en arrière-plan",
        "Prefetch et Preload sont identiques"
      ],
      "correct_answers": [
        "Preload = ressource nécessaire immédiatement pour la page courante",
        "Prefetch = ressource probablement utile pour la page suivante",
        "Prerender = chargement et rendu d'une page complète en arrière-plan"
      ],
      "explanation": "Chaque relation `rel=` cible une phase différente du cycle de navigation."
    },
    {
      "id": 3,
      "question": "Comment ajouter un header `Link: <...>; rel=preload` depuis Twig avec WebLink actif ?",
      "type": "single_choice",
      "options": [
        "Avec `{{ preload(asset('build/app.css')) }}`",
        "Avec `{{ asset('build/app.css') }}` seul",
        "Avec `{{ link('preload', 'build/app.css') }}`",
        "On ne peut pas depuis Twig"
      ],
      "correct_answers": [
        "Avec `{{ preload(asset('build/app.css')) }}`"
      ],
      "explanation": "Le helper `preload()` ajoute l'en-tête Link en plus du href dans le HTML."
    },
    {
      "id": 4,
      "question": "Comment définir des links HTTP depuis un contrôleur Symfony ?",
      "type": "single_choice",
      "options": [
        "En écrivant soi-même la chaîne `Link` dans `Response::headers`",
        "En récupérant `$_SERVER['LINKS']`",
        "En ajoutant un objet `Link` dans `$request->attributes->get('_links')`",
        "En configurant `framework.link_headers: true`"
      ],
      "correct_answers": [
        "En ajoutant un objet `Link` dans `$request->attributes->get('_links')`"
      ],
      "explanation": "WebLink stocke les `Link` dans l'attribut `_links` puis les sérialise en en-têtes."
    },
    {
      "id": 5,
      "question": "Quel est l'intérêt des réponses HTTP 103 Early Hints en présence de WebLink ?",
      "type": "single_choice",
      "options": [
        "Aucun, c'est uniquement pour WebSockets",
        "Envoyer les en-têtes `Link` avant la réponse finale pour démarrer les téléchargements d'assets pendant le temps de calcul",
        "Elles remplacent la réponse 200",
        "Elles servent à annuler une requête"
      ],
      "correct_answers": [
        "Envoyer les en-têtes `Link` avant la réponse finale pour démarrer les téléchargements d'assets pendant le temps de calcul"
      ],
      "explanation": "Le 103 parallélise CPU serveur et réseau client pour les ressources critiques."
    },
    {
      "id": 6,
      "question": "Pourquoi le Server Push HTTP/2 est-il moins privilégié aujourd'hui ?",
      "type": "single_choice",
      "options": [
        "Parce qu'il est interdit par la RFC",
        "Parce qu'il est déprécié dans Chrome et souvent désactivé au profit des Early Hints",
        "Parce qu'il ne fonctionne pas avec TLS",
        "Parce qu'il ne supporte pas les CSS"
      ],
      "correct_answers": [
        "Parce qu'il est déprécié dans Chrome et souvent désactivé au profit des Early Hints"
      ],
      "explanation": "Le support navigateur et serveur du Server Push diminue, d'où l'usage des 103."
    },
    {
      "id": 7,
      "question": "Comment AssetMapper s'appuie-t-il sur WebLink pour les modules JS ?",
      "type": "single_choice",
      "options": [
        "Il ignore WebLink",
        "Il génère des `<link rel=\"modulepreload\">` pour les modules nécessaires au démarrage",
        "Il force le bundling",
        "Il désactive HTTP/2"
      ],
      "correct_answers": [
        "Il génère des `<link rel=\"modulepreload\">` pour les modules nécessaires au démarrage"
      ],
      "explanation": "Le modulepreload évite la cascade d'import de modules."
    },
    {
      "id": 8,
      "question": "Quelles bonnes pratiques de performance accompagner les headers Link ?",
      "type": "multiple_choice",
      "options": [
        "Minifier JS/CSS en production",
        "Compresser en Gzip/Brotli côté serveur",
        "Configurer un cache long sur les fichiers versionnés (hash)",
        "Désactiver HTTP/2 pour simplifier"
      ],
      "correct_answers": [
        "Minifier JS/CSS en production",
        "Compresser en Gzip/Brotli côté serveur",
        "Configurer un cache long sur les fichiers versionnés (hash)"
      ],
      "explanation": "Les hints sont complémentaires aux optimisations classiques de build/serveur."
    },
    {
      "id": 9,
      "question": "Dans Twig, quel piège avec `preload()` si on oublie de typer la ressource (ex: font) ?",
      "type": "single_choice",
      "options": [
        "Le preload est ignoré si `as` ou `crossorigin` appropriés ne sont pas fournis",
        "La page plante",
        "La ressource est supprimée du cache",
        "Le header Link devient un cookie"
      ],
      "correct_answers": [
        "Le preload est ignoré si `as` ou `crossorigin` appropriés ne sont pas fournis"
      ],
      "explanation": "Les navigateurs peuvent ignorer un preload mal typé (fonts, scripts)."
    },
    {
      "id": 10,
      "question": "Comment éviter de précharger inutilement des ressources ?",
      "type": "multiple_choice",
      "options": [
        "N'utiliser `preload` que pour les ressources critiques de la page courante",
        "Préférer `prefetch` pour les assets probables mais non critiques",
        "Limiter les preloads massifs qui peuvent bloquer les autres downloads",
        "Tout passer en `preload` pour être sûr"
      ],
      "correct_answers": [
        "N'utiliser `preload` que pour les ressources critiques de la page courante",
        "Préférer `prefetch` pour les assets probables mais non critiques",
        "Limiter les preloads massifs qui peuvent bloquer les autres downloads"
      ],
      "explanation": "Un excès de preload peut saturer la bande passante et nuire au TTFB/TBT."
    }
  ]
}
