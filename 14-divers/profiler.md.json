{
  "source_file": "14-divers/profiler.md",
  "title": "Web Profiler et Data Collectors",
  "questions": [
    {
      "id": 1,
      "question": "Comment récupérer le profil d'une requête API sans WDT ?",
      "type": "single_choice",
      "options": [
        "Le profil est disponible via `/_profiler` ou via le header `X-Debug-Token-Link`",
        "Impossible sans HTML",
        "En ajoutant ?profile=1",
        "En activant Twig"
      ],
      "correct_answers": [
        "Le profil est disponible via `/_profiler` ou via le header `X-Debug-Token-Link`"
      ],
      "explanation": "Même sans WDT, le profiler enregistre et donne le lien dans le header."
    },
    {
      "id": 2,
      "question": "Où sont stockées les données du profiler ?",
      "type": "single_choice",
      "options": [
        "En base de données.",
        "Dans `var/cache/dev/profiler` (fichiers).",
        "En mémoire RAM uniquement.",
        "Dans les cookies."
      ],
      "correct_answers": [
        "Dans `var/cache/dev/profiler` (fichiers)."
      ],
      "explanation": "C'est pourquoi vider le cache supprime l'historique du profiler."
    },
    {
      "id": 3,
      "question": "Comment créer un collecteur de données personnalisé pour le profiler ?",
      "type": "single_choice",
      "options": [
        "En créant un EventListener.",
        "En étendant `AbstractDataCollector`, en implémentant `collect()`, et en taguant le service `data_collector`.",
        "En modifiant le Kernel.",
        "En utilisant `dump()`."
      ],
      "correct_answers": [
        "En étendant `AbstractDataCollector`, en implémentant `collect()`, et en taguant le service `data_collector`."
      ],
      "explanation": "Cela permet d'ajouter un onglet dans le profiler avec vos propres métriques."
    },
    {
      "id": 4,
      "question": "Dans un test fonctionnel, comment accéder aux données du profiler ?",
      "type": "single_choice",
      "options": [
        "`$client->getProfile()`",
        "`$client->getContainer()->get('profiler')`",
        "En parsant le HTML.",
        "Via une API externe."
      ],
      "correct_answers": [
        "`$client->getProfile()`"
      ],
      "explanation": "Cette méthode retourne l'objet `Symfony\\Component\\HttpKernel\\Profiler\\Profile` associé à la dernière requête."
    },
    {
      "id": 5,
      "question": "Quelle commande affiche les options configurables par défaut d'un bundle (référence) ?",
      "type": "single_choice",
      "options": [
        "`config:dump-reference <bundle>`",
        "`debug:config`",
        "`debug:router`",
        "`debug:container`"
      ],
      "correct_answers": [
        "`config:dump-reference <bundle>`"
      ],
      "explanation": "Utile pour créer un data collector avec config sémantique."
    },
    {
      "id": 6,
      "question": "Quel listener ajoute la Web Debug Toolbar dans la réponse HTML ?",
      "type": "single_choice",
      "options": [
        "`WebDebugToolbarListener`",
        "`EventDispatcher`",
        "`RouterListener`",
        "`ProfilerListener`"
      ],
      "correct_answers": [
        "`WebDebugToolbarListener`"
      ],
      "explanation": "Il injecte la barre juste avant </body> en dev."
    },
    {
      "id": 7,
      "question": "Que renvoie `$client->getProfile()` si le profiler est désactivé ?",
      "type": "single_choice",
      "options": [
        "null",
        "Une exception",
        "Un tableau",
        "Un logger"
      ],
      "correct_answers": [
        "null"
      ],
      "explanation": "Sans profiler actif, pas de profil disponible."
    },
    {
      "id": 8,
      "question": "Comment taguer un service collector personnalisé ?",
      "type": "single_choice",
      "options": [
        "Tag `data_collector` avec `id`, `template`, `priority`",
        "Tag `profiler`",
        "Tag `kernel.event_listener`",
        "Aucun tag"
      ],
      "correct_answers": [
        "Tag `data_collector` avec `id`, `template`, `priority`"
      ],
      "explanation": "Le tag data_collector enregistre le collector et son template."
    },
    {
      "id": 9,
      "question": "Que contient le header `X-Debug-Token-Link` ?",
      "type": "single_choice",
      "options": [
        "L'URL directe vers le profil de la requête",
        "Le token CSRF",
        "Le cookie session",
        "L'URL du router"
      ],
      "correct_answers": [
        "L'URL directe vers le profil de la requête"
      ],
      "explanation": "Pratique pour récupérer le profil d'une requête API/AJAX."
    },
    {
      "id": 10,
      "question": "Où sont persistés les profils ?",
      "type": "multiple_choice",
      "options": [
        "Dans `var/cache/dev/profiler`",
        "Stockage fichier",
        "Persistant entre requêtes",
        "En base SQL par défaut"
      ],
      "correct_answers": [
        "Dans `var/cache/dev/profiler`",
        "Stockage fichier",
        "Persistant entre requêtes"
      ],
      "explanation": "Par défaut, les profils sont des fichiers conservés dans var/cache/dev/profiler."
    }
  ]
}