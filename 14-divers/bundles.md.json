{
  "source_file": "14-divers/bundles.md",
  "title": "Création de Bundle",
  "questions": [
    {
      "id": 1,
      "question": "Quelle est la classe recommandée (depuis Symfony 6.1) à étendre pour créer un Bundle moderne ?",
      "type": "single_choice",
      "options": [
        "`Symfony\\Component\\HttpKernel\\Bundle\\Bundle`",
        "`Symfony\\Component\\HttpKernel\\Bundle\\AbstractBundle`",
        "`Symfony\\Component\\DependencyInjection\\Extension\\Extension`",
        "`Symfony\\Bundle\\FrameworkBundle\\Controller\\AbstractController`"
      ],
      "correct_answers": [
        "`Symfony\\Component\\HttpKernel\\Bundle\\AbstractBundle`"
      ],
      "explanation": "`AbstractBundle` simplifie la structure en regroupant la définition du bundle, le chargement de l'extension et la configuration sémantique dans une seule classe."
    },
    {
      "id": 2,
      "question": "Si votre Bundle doit configurer automatiquement un autre Bundle (ex: ajouter des variables globales Twig), quelle méthode (ou interface) utiliser ?",
      "type": "single_choice",
      "options": [
        "`loadExtension`",
        "`prependExtension` (ou `PrependExtensionInterface`)",
        "`build`",
        "`configure`"
      ],
      "correct_answers": [
        "`prependExtension` (ou `PrependExtensionInterface`)"
      ],
      "explanation": "Cette méthode permet de modifier la configuration d'autres bundles avant que le conteneur ne soit compilé."
    },
    {
      "id": 3,
      "question": "Quelle est la bonne pratique pour le nommage des services à l'intérieur d'un Bundle partagé ?",
      "type": "single_choice",
      "options": [
        "Utiliser des noms courts comme `mailer` ou `logger`.",
        "Préfixer tous les IDs de services par le nom du bundle (ex: `acme_blog.mailer`).",
        "Ne pas donner d'ID, utiliser uniquement l'autowiring.",
        "Utiliser le namespace complet de la classe."
      ],
      "correct_answers": [
        "Préfixer tous les IDs de services par le nom du bundle (ex: `acme_blog.mailer`)."
      ],
      "explanation": "Cela évite les collisions de noms avec les services de l'application ou d'autres bundles."
    },
    {
      "id": 4,
      "question": "Qu'est-ce qu'une 'Recette Symfony Flex' (Recipe) ?",
      "type": "single_choice",
      "options": [
        "Un fichier de documentation.",
        "Un script d'installation automatique qui configure le bundle (fichiers par défaut, variables d'env, ajout dans `bundles.php`) lors du `composer require`.",
        "Un gestionnaire de dépendances JS.",
        "Un outil de test de performance."
      ],
      "correct_answers": [
        "Un script d'installation automatique qui configure le bundle (fichiers par défaut, variables d'env, ajout dans `bundles.php`) lors du `composer require`."
      ],
      "explanation": "Les recettes permettent une expérience d'installation 'Zero Config' pour l'utilisateur final."
    },
    {
      "id": 5,
      "question": "À quoi sert la 'Semantic Configuration' (TreeBuilder) dans un Bundle ?",
      "type": "single_choice",
      "options": [
        "À traduire les messages d'erreur.",
        "À définir, valider et documenter la structure de configuration (YAML) exposée aux utilisateurs du bundle.",
        "À optimiser le chargement des classes.",
        "À configurer les routes."
      ],
      "correct_answers": [
        "À définir, valider et documenter la structure de configuration (YAML) exposée aux utilisateurs du bundle."
      ],
      "explanation": "Elle permet de fournir une configuration typée et validée (ex: `my_bundle: { api_key: ... }`) plutôt que des paramètres plats en vrac."
    },
    {
      "id": 6,
      "question": "Quel fichier composer doit indiquer `type: symfony-bundle` ?",
      "type": "single_choice",
      "options": [
        "composer.json du bundle",
        "composer.lock",
        "composer.json de l'app",
        "services.yaml"
      ],
      "correct_answers": [
        "composer.json du bundle"
      ],
      "explanation": "Déclarer le type permet à Flex/Composer de reconnaître et installer le bundle correctement."
    },
    {
      "id": 7,
      "question": "À quoi sert la méthode `build(ContainerBuilder $container)` dans un Bundle ?",
      "type": "single_choice",
      "options": [
        "Enregistrer des Compiler Passes pour modifier le container à la compilation",
        "Charger les routes",
        "Configurer Twig",
        "Démarrer le kernel"
      ],
      "correct_answers": [
        "Enregistrer des Compiler Passes pour modifier le container à la compilation"
      ],
      "explanation": "build() est le hook pour ajouter des compiler passes."
    },
    {
      "id": 8,
      "question": "Pourquoi préfixer les IDs de services d'un bundle ?",
      "type": "single_choice",
      "options": [
        "Éviter les collisions avec l'application ou d'autres bundles",
        "Accélérer le cache",
        "Rendre les services publics",
        "Obligatoire pour autowiring"
      ],
      "correct_answers": [
        "Éviter les collisions avec l'application ou d'autres bundles"
      ],
      "explanation": "Un préfixe (acme_blog.*) évite les conflits de noms."
    },
    {
      "id": 9,
      "question": "Quand choisir d'écrire un bundle plutôt que du code dans `src/` ?",
      "type": "multiple_choice",
      "options": [
        "Pour partager une fonctionnalité entre plusieurs projets",
        "Pour publier une librairie open-source",
        "Pour isoler du code métier interne à l'app courante"
      ],
      "correct_answers": [
        "Pour partager une fonctionnalité entre plusieurs projets",
        "Pour publier une librairie open-source"
      ],
      "explanation": "Le code applicatif reste dans src; les bundles servent au partage/distribution."
    },
    {
      "id": 10,
      "question": "Dans `AbstractBundle`, quel trio de méthodes couvre config, chargement et prepend ?",
      "type": "multiple_choice",
      "options": [
        "configure(DefinitionConfigurator), loadExtension(), prependExtension()",
        "build(), boot(), shutdown()",
        "register(), boot(), terminate()",
        "init(), run(), stop()"
      ],
      "correct_answers": [
        "configure(DefinitionConfigurator), loadExtension(), prependExtension()"
      ],
      "explanation": "AbstractBundle expose ces hooks pour config sémantique, chargement et prepend d'autres bundles."
    }
  ]
}