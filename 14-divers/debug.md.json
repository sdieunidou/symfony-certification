{
  "source_file": "14-divers/debug.md",
  "title": "Débogage et VarDumper",
  "questions": [
    {
      "id": 1,
      "question": "À quoi sert `php bin/console server:dump` ?",
      "type": "single_choice",
      "options": [
        "Afficher les dump() hors de la réponse HTTP/CLI (API, workers)",
        "Vider le cache",
        "Dumper la base",
        "Afficher la config"
      ],
      "correct_answers": [
        "Afficher les dump() hors de la réponse HTTP/CLI (API, workers)"
      ],
      "explanation": "Le serveur collecte les dumps et les affiche dans le terminal."
    },
    {
      "id": 2,
      "question": "Quel composant permet de mesurer le temps d'exécution de segments de code spécifiques et de les visualiser dans le Profiler ?",
      "type": "single_choice",
      "options": [
        "Timer",
        "Stopwatch",
        "Clock",
        "Benchmark"
      ],
      "correct_answers": [
        "Stopwatch"
      ],
      "explanation": "Le composant `Stopwatch` (`$stopwatch->start()`, `$stopwatch->stop()`) ajoute des événements temporels dans la timeline du profiler."
    },
    {
      "id": 3,
      "question": "Pourquoi l'utilisation de la fonction `dump()` est-elle risquée en production ?",
      "type": "single_choice",
      "options": [
        "Elle ralentit le serveur de 50%.",
        "Elle expose des mots de passe.",
        "Si le paquet `symfony/var-dumper` (ou le bundle Debug) n'est pas installé en prod (require-dev), cela causera une erreur fatale 'Call to undefined function'.",
        "Elle remplit les logs d'erreurs."
      ],
      "correct_answers": [
        "Si le paquet `symfony/var-dumper` (ou le bundle Debug) n'est pas installé en prod (require-dev), cela causera une erreur fatale 'Call to undefined function'."
      ],
      "explanation": "Bien que `dump()` soit défini globalement quand le composant est là, on tend à le garder en dépendance de dev. L'oublier dans le code peut donc casser la prod."
    },
    {
      "id": 4,
      "question": "Où s'affiche le résultat d'un `dump($var)` lorsqu'on navigue sur une page HTML avec le profiler activé ?",
      "type": "single_choice",
      "options": [
        "Directement en haut de la page, en brut.",
        "Dans la 'Debug Toolbar' (icône cible) au survol.",
        "Dans la console du navigateur.",
        "Dans le fichier de log."
      ],
      "correct_answers": [
        "Dans la 'Debug Toolbar' (icône cible) au survol."
      ],
      "explanation": "Le VarDumper intercepte la sortie et l'intègre proprement dans la barre de débogage pour ne pas casser le layout de la page."
    },
    {
      "id": 5,
      "question": "Quel bundle fournit la WDT et le profiler en dev ?",
      "type": "single_choice",
      "options": [
        "DebugBundle",
        "FrameworkBundle",
        "TwigBundle",
        "DoctrineBundle"
      ],
      "correct_answers": [
        "DebugBundle"
      ],
      "explanation": "DebugBundle active WDT/profiler en environnement dev."
    },
    {
      "id": 6,
      "question": "Quel risque en prod si `dump()` reste dans le code ?",
      "type": "single_choice",
      "options": [
        "Fatal error si var-dumper est en require-dev",
        "Aucun",
        "Compile Twig",
        "Active debug"
      ],
      "correct_answers": [
        "Fatal error si var-dumper est en require-dev"
      ],
      "explanation": "Sans var-dumper en prod, `dump()` n'existe pas."
    },
    {
      "id": 7,
      "question": "Comment afficher des temps custom dans la timeline profiler depuis Twig ?",
      "type": "single_choice",
      "options": [
        "Avec les balises `{% stopwatch 'label' %}...{% endstopwatch %}`",
        "Avec dump()",
        "Avec profiler:log",
        "Impossible"
      ],
      "correct_answers": [
        "Avec les balises `{% stopwatch 'label' %}...{% endstopwatch %}`"
      ],
      "explanation": "Stopwatch expose des balises Twig pour profiler des blocs."
    },
    {
      "id": 8,
      "question": "Que se passe-t-il si le profiler est désactivé ?",
      "type": "single_choice",
      "options": [
        "`$client->getProfile()` retourne null et aucune WDT/collecte",
        "Erreur 500",
        "Les logs disparaissent",
        "Rien"
      ],
      "correct_answers": [
        "`$client->getProfile()` retourne null et aucune WDT/collecte"
      ],
      "explanation": "Sans profiler activé, pas de profil disponible."
    },
    {
      "id": 9,
      "question": "Pourquoi éviter de laisser `debug.container.dump: true` sur gros projets ?",
      "type": "single_choice",
      "options": [
        "Cela ralentit fortement le warmup en générant un gros XML du conteneur",
        "Cela supprime le cache",
        "Cela casse Twig",
        "Cela désactive le profiler"
      ],
      "correct_answers": [
        "Cela ralentit fortement le warmup en générant un gros XML du conteneur"
      ],
      "explanation": "Le dump XML volumineux pénalise le cache:clear/warmup."
    },
    {
      "id": 10,
      "question": "Comment mesurer facilement une section de code côté service ?",
      "type": "single_choice",
      "options": [
        "`$stopwatch->start('event'); ... $stopwatch->stop('event');`",
        "dump()",
        "sleep()",
        "logger->info()"
      ],
      "correct_answers": [
        "`$stopwatch->start('event'); ... $stopwatch->stop('event');`"
      ],
      "explanation": "Stopwatch donne durée/mémoire et apparaît dans la timeline."
    }
  ]
}
