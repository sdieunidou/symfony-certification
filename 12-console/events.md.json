{
  "source_file": "12-console/events.md",
  "title": "Événements de la Console",
  "questions": [
    {
      "id": 1,
      "question": "Quel événement est déclenché juste avant l'exécution d'une commande console (permettant par exemple de la désactiver) ?",
      "type": "single_choice",
      "options": [
        "`kernel.request`",
        "`console.command`",
        "`console.start`",
        "`console.init`"
      ],
      "correct_answers": [
        "`console.command`"
      ],
      "explanation": "L'événement `console.command` (classe `ConsoleCommandEvent`) est le premier déclenché et permet d'interagir avant l'exécution."
    },
    {
      "id": 2,
      "question": "Quel événement permet de gérer proprement l'arrêt d'un worker (boucle infinie) lors d'un Ctrl+C (SIGINT) ?",
      "type": "single_choice",
      "options": [
        "`console.terminate`",
        "`console.signal`",
        "`kernel.terminate`",
        "`console.stop`"
      ],
      "correct_answers": [
        "`console.signal`"
      ],
      "explanation": "L'événement `console.signal` permet de s'abonner aux signaux système (comme SIGINT) pour effectuer un arrêt gracieux."
    },
    {
      "id": 3,
      "question": "Si une commande lance une exception, quel événement est dispatché ?",
      "type": "single_choice",
      "options": [
        "`kernel.exception`",
        "`console.error`",
        "`console.exception`",
        "`console.failure`"
      ],
      "correct_answers": [
        "`console.error`"
      ],
      "explanation": "Le composant Console utilise `console.error` pour gérer les exceptions, indépendamment de `kernel.exception` (qui est pour HTTP)."
    },
    {
      "id": 4,
      "question": "Est-ce que les événements de la Console (`console.command`, etc.) sont déclenchés lors d'une requête HTTP classique ?",
      "type": "single_choice",
      "options": [
        "Oui, toujours.",
        "Non, jamais.",
        "Uniquement si la requête HTTP lance un sous-processus.",
        "Oui, si le mode debug est activé."
      ],
      "correct_answers": [
        "Non, jamais."
      ],
      "explanation": "Le cycle de vie Console est totalement distinct du cycle de vie HttpKernel. Ces événements ne concernent que l'utilisation CLI."
    },
    {
      "id": 5,
      "question": "Quelle classe contient les constantes définissant les noms des événements de la console ?",
      "type": "single_choice",
      "options": [
        "`Symfony\\Component\\Console\\ConsoleEvents`",
        "`Symfony\\Component\\HttpKernel\\KernelEvents`",
        "`Symfony\\Component\\Console\\Events`",
        "`Symfony\\Component\\Console\\Event\\ConsoleEvents`"
      ],
      "correct_answers": [
        "`Symfony\\Component\\Console\\ConsoleEvents`"
      ],
      "explanation": "On utilise par exemple `ConsoleEvents::COMMAND`, `ConsoleEvents::TERMINATE`, etc."
    },
    {
      "id": 6,
      "question": "Quel événement permet de modifier le code de sortie après exécution d'une commande ?",
      "type": "single_choice",
      "options": [
        "`console.terminate`",
        "`console.command`",
        "`console.error`",
        "`console.exit`"
      ],
      "correct_answers": [
        "`console.terminate`"
      ],
      "explanation": "ConsoleTerminateEvent permet d'ajuster l'exit code une fois l'exécution terminée."
    },
    {
      "id": 7,
      "question": "Comment empêcher l'exécution d'une commande dans `console.command` ?",
      "type": "single_choice",
      "options": [
        "Appeler `$event->disableCommand()` et fixer un exit code",
        "throw new Exception",
        "return false",
        "Impossible"
      ],
      "correct_answers": [
        "Appeler `$event->disableCommand()` et fixer un exit code"
      ],
      "explanation": "disableCommand empêche le run; on peut aussi définir setExitCode."
    },
    {
      "id": 8,
      "question": "Quel événement capter pour transformer une exception en message utilisateur et changer le code de sortie ?",
      "type": "single_choice",
      "options": [
        "`console.error`",
        "`kernel.exception`",
        "`console.command`",
        "`console.signal`"
      ],
      "correct_answers": [
        "`console.error`"
      ],
      "explanation": "ConsoleErrorEvent permet de remplacer l'exception et le code."
    },
    {
      "id": 9,
      "question": "Les événements console sont-ils émis pour les requêtes HTTP ?",
      "type": "single_choice",
      "options": [
        "Non, cycle totalement distinct de HttpKernel",
        "Oui, toujours",
        "Oui, si debug",
        "Uniquement en prod"
      ],
      "correct_answers": [
        "Non, cycle totalement distinct de HttpKernel"
      ],
      "explanation": "ConsoleEvents ne sont déclenchés qu'en CLI."
    },
    {
      "id": 10,
      "question": "Quel événement intercepter pour gérer un SIGINT (Ctrl+C) sur un worker console ?",
      "type": "single_choice",
      "options": [
        "`console.signal`",
        "`kernel.terminate`",
        "`console.terminate`",
        "`console.stop`"
      ],
      "correct_answers": [
        "`console.signal`"
      ],
      "explanation": "ConsoleSignalEvent notifie les signaux système reçus."
    }
  ]
}